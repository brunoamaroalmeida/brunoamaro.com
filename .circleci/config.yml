version: 2
jobs:
  build:
    docker:
      - image: debian:stretch

    steps:
      - checkout

      - run:
          name: Install Dependencies
          command: apt-get update && apt-get install curl -qy

      - run:
          name: Install Homebrew
          command: sh -c "$(curl -fsSL https://raw.githubusercontent.com/Linuxbrew/install/master/install.sh)"

      - run:
          name: Install Hugo
          command: brew install hugo

      - run:
          name: Generate Static Content
          command: hugo

      - run:
          name: Deploy
          command: cd public && find . -type f -exec curl -u ${username}:${password} ${ssl} --ssl-reqd --ftp-create-dirs -T {} ftp://${host}/{} \;
